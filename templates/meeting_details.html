<style>
    .bot-bubble {
        padding: 16px 20px;
    }
    .event-details {
        background: #2a2b32;
        padding: 16px;
        border-radius: 12px;
        margin-top: 12px;
        font-size: 14px;
        border: 1px solid #3a3b3f;
    }
    .event-details .detail-row {
        display: flex;
        align-items: flex-start;
        padding: 8px 0;
        border-bottom: 1px solid #3a3b3f;
    }
    .event-details .detail-row:last-child {
        border-bottom: none;
    }
    .event-details .detail-icon {
        width: 24px;
        font-size: 16px;
        margin-right: 12px;
        flex-shrink: 0;
    }
    .event-details .detail-content {
        flex: 1;
        word-wrap: break-word;
    }
    .event-details .detail-label {
        color: #9ca3af;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 2px;
    }
    .event-details .detail-value {
        color: white;
        font-size: 14px;
        font-weight: 500;
    }
    .event-details .detail-value a {
        color: #60a5fa;
        text-decoration: none;
    }
    .event-details .detail-value a:hover {
        text-decoration: underline;
    }
    .quick-action-btn {
        background: #40414f;
        color: white;
        border: 1px solid #4d4d4f;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        margin-right: 8px;
        margin-top: 8px;
        transition: all 0.2s ease;
    }
    .quick-action-btn:hover {
        background: #2a2b32;
        border-color: #8e8ea0;
    }
    .action-buttons {
        margin-top: 16px;
        margin-bottom: 12px;
    }
    .action-buttons a {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        margin-right: 10px;
        transition: all 0.2s ease;
    }
    .action-buttons a.primary {
        background: #1a73e8;
        color: white;
        border: 1px solid #1a73e8;
    }
    .action-buttons a.primary:hover {
        background: #1557b0;
        border-color: #1557b0;
    }
    .action-buttons a.secondary {
        background: transparent;
        color: white;
        border: 1px solid #4d4d4f;
    }
    .action-buttons a.secondary:hover {
        background: #2a2b32;
        border-color: #8e8ea0;
    }
    .event-details a {
        color: #60a5fa;
        text-decoration: none;
    }
    .event-details a:hover {
        text-decoration: underline;
    }
    .description-box {
        background: #1a1b1e;
        padding: 12px;
        border-radius: 8px;
        margin-top: 8px;
        white-space: pre-wrap;
        word-wrap: break-word;
        font-size: 13px;
        line-height: 1.5;
        color: #d1d5db;
    }
</style>

{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block messages %}
<div class="message bot success">
    {% if icon %}
    <span class="message-icon">{{ icon }}</span>
    {% endif %}
    <div class="message-bubble bot-bubble event-details">
        <h3 style="margin: 0 0 10px;">{{ title }}</h3>
        <p>{{ message }}</p>
        
        {% if show_details %}
        <div class="event-details">
            {% if summary %}
            <div class="detail-row">
                <span class="detail-icon">üìã</span>
                <div class="detail-content">
                    <div class="detail-label">Meeting Title</div>
                    <div class="detail-value" style="font-size: 16px;">{{ summary }}</div>
                </div>
            </div>
            {% endif %}
            
            {% if start %}
            <div class="detail-row">
                <span class="detail-icon">üìÖ</span>
                <div class="detail-content">
                    <div class="detail-label">Start</div>
                    <div class="detail-value">{{ start }}</div>
                </div>
            </div>
            {% endif %}
            
            {% if end %}
            <div class="detail-row">
                <span class="detail-icon">‚è∞</span>
                <div class="detail-content">
                    <div class="detail-label">End</div>
                    <div class="detail-value">{{ end }}</div>
                </div>
            </div>
            {% endif %}
            
            {% if location %}
            <div class="detail-row">
                <span class="detail-icon">üìç</span>
                <div class="detail-content">
                    <div class="detail-label">Location</div>
                    <div class="detail-value">
                        {% if location.startswith('http') %}
                        <a href="{{ location }}" target="_blank">{{ location }}</a>
                        {% else %}
                        {{ location }}
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
            
            {% if attendees %}
            <div class="detail-row">
                <span class="detail-icon">üë•</span>
                <div class="detail-content">
                    <div class="detail-label">Attendees</div>
                    <div class="detail-value">{{ attendees }}</div>
                </div>
            </div>
            {% endif %}
            
            {% if description %}
            <div class="detail-row" style="display: block;">
                <span class="detail-icon">üìù</span>
                <div class="detail-content">
                    <div class="detail-label">Description</div>
                    <div class="description-box">{{ description }}</div>
                </div>
            </div>
            {% endif %}
            
            {% if attachments %}
            <div class="detail-row">
                <span class="detail-icon">üìé</span>
                <div class="detail-content">
                    <div class="detail-label">Attachments</div>
                    {% for attachment in attachments %}
                    <div class="detail-value" style="margin-bottom: 4px;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#60a5fa" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                            <path d="M12 2L2 19h7l3-5.5L15 19h7L12 2z"></path>
                        </svg>
                        {{ attachment.title }}
                        <a href="{{ attachment.fileUrl }}" target="_blank" style="margin-left: 8px; font-size: 12px;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                            Open
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if hangout_link and meeting_mode != 'offline' %}
            <div class="detail-row">
                <span class="detail-icon">üîó</span>
                <div class="detail-content">
                    <div class="detail-label">Google Meet</div>
                    <div class="detail-value"><a href="{{ hangout_link }}" target="_blank">Join Meeting</a></div>
                </div>
            </div>
            {% elif meeting_mode == 'offline' %}
            <div class="detail-row">
                <span class="detail-icon">üìç</span>
                <div class="detail-content">
                    <div class="detail-label">Meeting Type</div>
                    <div class="detail-value">Offline - Physical Meeting</div>
                </div>
            </div>
            {% endif %}
            
            {% if html_link %}
            <div class="detail-row">
                <span class="detail-icon">üìÜ</span>
                <div class="detail-content">
                    <div class="detail-label">Calendar</div>
                    <div class="detail-value"><a href="{{ html_link }}" target="_blank">View in Google Calendar</a></div>
                </div>
            </div>
            {% endif %}
        </div>
        
        <div class="action-buttons">
            {% if hangout_link and meeting_mode != 'offline' %}
            <a href="{{ hangout_link }}" target="_blank" class="primary">üé• Join Meeting</a>
            {% endif %}
            {% if html_link %}
            <a href="{{ html_link }}" target="_blank" class="secondary">üìÖ View in Calendar</a>
            {% endif %}
        </div>
        {% endif %}
        
        <div class="quick-actions">
            {% if action == 'update' %}
            <button class="quick-action-btn" onclick="window.location.href='/'">üîÑ Update Another Meeting</button>
            {% else %}
            <button class="quick-action-btn" onclick="window.location.href='/'">üè† Create Another Meeting</button>
            {% endif %}
            <button class="quick-action-btn" onclick="window.location.href='/events'">üìã View All Events</button>
        </div>
    </div>
</div>
{% endblock %}
